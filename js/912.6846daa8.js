"use strict";(self["webpackChunklegal_aid"]=self["webpackChunklegal_aid"]||[]).push([[912],{3310:function(e,o,r){r.r(o),r.d(o,{default:function(){return d}});var t=function(){var e=this,o=e._self._c;return o("div",[o("a-form-model",{ref:"formLogin",attrs:{rules:e.rules,model:e.formLogin},on:{submit:e.login},nativeOn:{submit:function(e){e.preventDefault()}}},[o("a-form-model-item",{attrs:{prop:"phone"}},[o("a-input",{attrs:{placeholder:"请输入手机号",size:"large"},model:{value:e.formLogin.phone,callback:function(o){e.$set(e.formLogin,"phone",o)},expression:"formLogin.phone"}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),o("a-form-model-item",{attrs:{prop:"code"}},[o("a-input-search",{attrs:{placeholder:"输入验证码",size:"large"},on:{search:e.sendCode},model:{value:e.formLogin.code,callback:function(o){e.$set(e.formLogin,"code",e._n(o))},expression:"formLogin.code"}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"code"},slot:"prefix"}),o("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 获取验证码 ")])],1)],1),o("div",{staticClass:"row checkbox"},[o("a-form-model-item",[o("a-checkbox",{attrs:{checked:e.formLogin.checked},on:{change:e.rememberMe}},[e._v(" 记住登录状态 ")])],1)],1),o("a-form-model-item",[o("a-button",{attrs:{type:"primary",block:"","html-type":"submit",size:"large",loading:e.loading}},[e._v(" 登 录 ")])],1)],1)],1)},s=[],n=(r(21703),r(18091)),i=r(81639),a=r.n(i),c={name:"LoginPhone",data(){let e=(e,o,r)=>{/^1[2-9]\d{9}$/.test(o)?r():r(new Error("手机号格式不正确!"))},o=(e,o,r)=>{if(!o)return r(new Error("请输入验证码！"));Number.isInteger(o)?/^\d{6}$/g.test(o)?r():r(new Error("验证码位数不正确！")):r(new Error("请输入数字！"))};return{formLogin:{phone:"",code:"",checked:!1},loading:!1,correctCode:"",rules:{phone:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:e,trigger:"change"}],code:[{validator:o,trigger:"change"}]}}},methods:{login(){this.$refs.formLogin.validate((e=>{if(!e)return this.$message.error("请先规范填写表单!"),!1;this.loading=!0;const{phone:o,code:r,checked:t}=this.formLogin;(0,n.Z)({method:"post",url:"/ouser/login",params:{phone:o,code:r}}).then((e=>{if(1===e.code){const o=e.data;a().set("token",o,(new Date).getTime()+6048e5),t&&a().set("rememberMe",!0,(new Date).getTime()+6048e5),this.$message.success("登录成功！"),this.$router.push({name:"home"})}else this.$message.error(e.msg),this.formLogin={phone:"",code:"",checked:!1}})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)})),this.loading=!1,this.formLogin={phone:"",code:"",checked:!1}}))},sendCode(){this.$refs.formLogin.validateField(["phone"],(e=>{e?this.$message.error("获取验证码失败！"):(0,n.Z)({method:"get",url:"/ouser/getCode",params:{phone:this.formLogin.phone}}).then((e=>{1===e.code?this.$message.success("验证码发送成功，请注意查收！",5):(this.$message.error(e.msg),this.formLogin={phone:"",code:"",checked:!1})}))}))},rememberMe(){this.formLogin.checked=!this.formLogin.checked}}},l=c,m=r(1001),h=(0,m.Z)(l,t,s,!1,null,"6486af12",null),d=h.exports}}]);
//# sourceMappingURL=912.6846daa8.js.map