"use strict";(self["webpackChunklegal_aid"]=self["webpackChunklegal_aid"]||[]).push([[627],{49627:function(e,o,t){t.r(o),t.d(o,{default:function(){return c}});var r=function(){var e=this,o=e._self._c;return o("div",[o("a-form-model",{ref:"formLogin",attrs:{rules:e.rules,model:e.formLogin},on:{submit:e.login},nativeOn:{submit:function(e){e.preventDefault()}}},[o("a-form-model-item",{attrs:{prop:"phone"}},[o("a-input",{attrs:{placeholder:"请输入手机号",size:"large"},model:{value:e.formLogin.phone,callback:function(o){e.$set(e.formLogin,"phone",o)},expression:"formLogin.phone"}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),o("a-form-model-item",{attrs:{prop:"code"}},[o("a-input-search",{attrs:{placeholder:"输入验证码",size:"large"},on:{search:e.sendCode},model:{value:e.formLogin.code,callback:function(o){e.$set(e.formLogin,"code",e._n(o))},expression:"formLogin.code"}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"code"},slot:"prefix"}),o("a-button",{attrs:{slot:"enterButton",disabled:e.disable},slot:"enterButton"},[e._v(" "+e._s(e.btnText)+" ")])],1)],1),o("a-form-model-item",[o("a-button",{attrs:{type:"primary",block:"","html-type":"submit",size:"large",loading:e.loading}},[e._v(" 登 录 ")])],1)],1)],1)},s=[],n=(t(21703),t(84471)),i=t(81639),a=t.n(i),l={name:"LoginPhone",data(){let e=(e,o,t)=>{/^1[2-9]\d{9}$/.test(o)?t():t(new Error("手机号格式不正确!"))},o=(e,o,t)=>{if(!o)return t(new Error("请输入验证码！"));Number.isInteger(o)?/^\d{6}$/g.test(o)?t():t(new Error("验证码位数不正确！")):t(new Error("请输入数字！"))};return{formLogin:{phone:"",code:""},loading:!1,btnText:"获取验证码",disable:!1,rules:{phone:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:e,trigger:"change"}],code:[{validator:o,trigger:"change"}]}}},methods:{login(){this.$refs.formLogin.validate((e=>{if(!e)return this.$message.error("请先规范填写表单!"),!1;this.loading=!0;const{phone:o,code:t}=this.formLogin;(0,n.Z)({method:"post",url:"/ouser/before/login",params:{phone:o,code:t}}).then((e=>{if(1===e.code){const o=e.data;a().set("token",o),this.$message.success("登录成功！"),this.$router.push({name:"home"})}else this.$message.error(e.msg),this.formLogin={phone:"",code:""}})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))}))},sendCode(){this.$refs.formLogin.validateField(["phone"],(e=>{if(e)return void this.$message.error("获取验证码失败！");this.disable=!0;let o=60,t=setInterval((()=>{this.btnText=o+" 秒后重新发送",o--,o<0&&(this.disable=!1,this.btnText="获取验证码",clearInterval(t))}),1e3);(0,n.Z)({method:"get",url:"/ouser/before/getCode",params:{phone:this.formLogin.phone}}).then((e=>{1===e.code?this.$message.success("验证码发送成功，请注意查收！",5):this.$message.error(e.msg)})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))}))}},activated(){this.loading=!1}},d=l,g=t(1001),h=(0,g.Z)(d,r,s,!1,null,"632580e9",null),c=h.exports}}]);
//# sourceMappingURL=627.36452998.js.map