"use strict";(self["webpackChunklegal_aid"]=self["webpackChunklegal_aid"]||[]).push([[834],{94834:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=function(){var e=this,t=e._self._c;return t("div",[e.isLoading?t("div",{staticStyle:{"margin-top":"24%","margin-left":"45%"}},[t("Header"),t("a-spin",{attrs:{size:"large"}})],1):t("div",{staticStyle:{"margin-top":"10%","margin-left":"23%"}},[t("Header"),t("a-icon",{attrs:{type:"user"}}),e._v(" 个人信息 "),t("div",{staticClass:"user-info"},[t("ul",[t("li",[e._v(" 头像： "),t("a-avatar",{attrs:{icon:"user",size:64}}),t("a-button",{attrs:{type:"link",disabled:""}},[e._v(" 暂不支持修改头像 ")])],1),t("li",[e._v(" 用户名： "+e._s(e.userInfo.username)+" "),t("a-button",{attrs:{type:"link",disabled:""}},[e._v(" 暂不支持修改用户名 ")])],1),t("li",[e._v(" 手机号： "+e._s(e.userInfo.phone.substring(0,3))+"****"+e._s(e.userInfo.phone.substring(7))+" "),t("a-button",{attrs:{type:"link"},on:{click:e.changePhone}},[e._v(" 修改 ")]),t("div",{staticStyle:{"margin-bottom":"2%"}})],1),t("li",[e._v(" 密码： ************ "),t("a-button",{attrs:{type:"link"},on:{click:e.changePwd}},[e._v(" 修改 ")])],1),t("div",[t("a-button",{staticStyle:{"margin-left":"15%","margin-bottom":"3%"},attrs:{type:"danger"},on:{click:e.deleteAccount}},[e._v(" 删除账户 ")])],1)])])],1)])},r=[],a=n(61046),o=n(81639),i=n.n(o),l=n(84471),c={name:"UserCenter",components:{Header:a.Z},data(){return{userInfo:{uid:"",username:"",phone:""},isLoading:!0}},methods:{getUserInfo(){this.userInfo=i().get("userInfo"),this.isLoading=!0,this.userInfo?this.isLoading=!1:(0,l.Z)({method:"get",url:"/users"}).then((e=>{if(1===e.code){const t=e.data.map;this.userInfo=t,i().set("userInfo",t)}else this.$message.error(e.msg)})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))},changePhone(){let e=this.$router.resolve({name:"changePhone"});window.open(e.href,"_blank")},changePwd(){let e=this.$router.resolve({name:"getPass"});window.open(e.href,"_blank")},deleteAccount(){let e=this;this.$confirm({title:"确定要删除账户吗？",content:"删除后，账户个人信息将无法恢复！",okText:"确认",okType:"danger",cancelText:"取消",onOk(){return e.confirmLoading=!0,new Promise(((e,t)=>{(0,l.Z)({method:"delete",url:"/ouser"}).then((t=>{e(t)})).catch((e=>{t(e)}))})).then((t=>{if(1===t.code){let t=5;const n=e.$success({title:"删除账户成功！",content:`即将在 ${t} 秒后跳转到主页...`,okText:"确定"}),s=setInterval((()=>{t-=1,n.update({content:`即将在 ${t} 秒后跳转到主页...`})}),1e3);setTimeout((()=>{clearInterval(s),i().clearAll(),e.$router.replace({name:"home"}),n.destroy()}),1e3*t)}else e.$message.error(t.msg)})).catch((t=>{e.$message.error("请求错误！")}))},onCancel(){e.$message.info("操作取消")}})}},computed:{username(){const e=i().get("userInfo");return e?e.username:(this.getUserInfo(),i().get("userInfo").username)}},mounted(){this.getUserInfo()},activated(){this.isLoading=!0,this.getUserInfo()},deactivated(){this.$destroyAll()}},u=c,d=n(1001),h=(0,d.Z)(u,s,r,!1,null,"da109b82",null),g=h.exports}}]);
//# sourceMappingURL=834.e43e2152.js.map