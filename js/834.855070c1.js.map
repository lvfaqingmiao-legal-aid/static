{"version":3,"file":"js/834.855070c1.js","mappings":"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","sources":["webpack://legal-aid/./src/pages/user/UserCenter.vue","webpack://legal-aid/src/pages/user/UserCenter.vue","webpack://legal-aid/./src/pages/user/UserCenter.vue?167f","webpack://legal-aid/./src/pages/user/UserCenter.vue?a951"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.isLoading)?_c('div',{staticStyle:{\"margin-top\":\"24%\",\"margin-left\":\"45%\"}},[_c('Header'),_c('a-spin',{attrs:{\"size\":\"large\"}})],1):_c('div',{staticStyle:{\"margin-top\":\"10%\",\"margin-left\":\"23%\"}},[_c('Header'),_c('a-icon',{attrs:{\"type\":\"user\"}}),_vm._v(\" 个人信息 \"),_c('div',{staticClass:\"user-info\"},[_c('ul',[_c('li',[_vm._v(\" 头像： \"),_c('a-avatar',{attrs:{\"icon\":\"user\",\"size\":64}}),_c('a-button',{attrs:{\"type\":\"link\",\"disabled\":\"\"}},[_vm._v(\" 暂不支持修改头像 \")])],1),_c('li',[_vm._v(\" 用户名： \"+_vm._s(_vm.userInfo.username)+\" \"),_c('a-button',{attrs:{\"type\":\"link\",\"disabled\":\"\"}},[_vm._v(\" 暂不支持修改用户名 \")])],1),_c('li',[_vm._v(\" 手机号： \"+_vm._s(_vm.userInfo.phone.substring(0, 3))+\"****\"+_vm._s(_vm.userInfo.phone.substring(7))+\" \"),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":_vm.changePhone}},[_vm._v(\" 修改 \")]),_c('div',{staticStyle:{\"margin-bottom\":\"2%\"}})],1),_c('li',[_vm._v(\" 密码： ************ \"),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":_vm.changePwd}},[_vm._v(\" 修改 \")])],1),_c('div',[_c('a-button',{staticStyle:{\"margin-left\":\"15%\",\"margin-bottom\":\"3%\"},attrs:{\"type\":\"danger\"},on:{\"click\":_vm.deleteAccount}},[_vm._v(\" 删除账户 \")])],1)])])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!--个人中心-->\r\n  <div>\r\n    <div v-if=\"isLoading\" style=\"margin-top: 24%;margin-left: 45%;\">\r\n      <Header></Header>\r\n      <a-spin size=\"large\"/>\r\n    </div>\r\n    <div v-else style=\"margin-top: 10%;margin-left: 23%;\">\r\n      <Header></Header>\r\n      <a-icon type=\"user\"/>\r\n      个人信息\r\n      <div class=\"user-info\">\r\n        <ul>\r\n          <li>\r\n            头像：\r\n            <a-avatar icon=\"user\" :size=\"64\"/>\r\n            <a-button type=\"link\" disabled>\r\n              暂不支持修改头像\r\n            </a-button>\r\n          </li>\r\n          <li>\r\n            用户名： {{ userInfo.username }}\r\n            <a-button type=\"link\" disabled>\r\n              暂不支持修改用户名\r\n            </a-button>\r\n          </li>\r\n          <li>\r\n            手机号： {{ userInfo.phone.substring(0, 3) }}****{{ userInfo.phone.substring(7) }}\r\n            <a-button type=\"link\" @click=\"changePhone\">\r\n              修改\r\n            </a-button>\r\n            <div style=\"margin-bottom: 2%;\"></div>\r\n          </li>\r\n          <li>\r\n            密码： ************\r\n            <a-button type=\"link\" @click=\"changePwd\">\r\n              修改\r\n            </a-button>\r\n          </li>\r\n          <div>\r\n            <a-button type=\"danger\" @click=\"deleteAccount\"\r\n                      style=\"margin-left: 15%;margin-bottom: 3%;\">\r\n              删除账户\r\n            </a-button>\r\n          </div>\r\n\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Header from \"@/components/Header\";\r\n  import storage from \"store\";\r\n  import request from \"@/utils/request\";\r\n\r\n  export default {\r\n    name: 'UserCenter',\r\n    components: {Header},\r\n    data() {\r\n      return {\r\n        userInfo: {\r\n          uid: '',\r\n          username: '',\r\n          phone: ''\r\n        },\r\n        isLoading: true,\r\n      }\r\n    },\r\n    methods: {\r\n      getUserInfo() {\r\n        this.userInfo = storage.get('userInfo');\r\n        this.isLoading = true;\r\n        if (this.userInfo) {\r\n          this.isLoading = false;\r\n          return;\r\n        }\r\n\r\n        request({\r\n          method: 'get',\r\n          url: '/users'\r\n        }).then(res => {\r\n          if (res.code === 1) {\r\n            const userInfo = res.data.map;\r\n            this.userInfo = userInfo;\r\n            storage.set('userInfo', userInfo);\r\n          } else {\r\n            this.$message.error(res.msg);\r\n          }\r\n        }).catch(error => {\r\n          this.$message.error('服务器错误！');\r\n          console.log(error);\r\n        })\r\n      },\r\n      changePhone() {\r\n        let url = this.$router.resolve({\r\n          name: 'changePhone'\r\n        });\r\n        window.open(url.href, '_blank');\r\n      },\r\n      changePwd() {\r\n        let url = this.$router.resolve({\r\n          name: 'getPass'\r\n        });\r\n        window.open(url.href, '_blank');\r\n      },\r\n      deleteAccount() {\r\n        let self = this;\r\n\r\n        this.$confirm({\r\n          title: '确定要删除账户吗？',\r\n          content: '删除后，账户个人信息将无法恢复！',\r\n          okText: '确认',\r\n          okType: 'danger',\r\n          cancelText: '取消',\r\n          onOk() {\r\n            self.confirmLoading = true;\r\n            return new Promise((resolve, reject) => {\r\n              request({\r\n                method: 'delete',\r\n                url: '/ouser'\r\n              }).then(res => {\r\n                resolve(res);\r\n              }).catch(err => {\r\n                reject(err);\r\n              })\r\n            }).then((res) => {\r\n              if (res.code === 1) {\r\n\r\n                let secondsToGo = 5;\r\n                const modal = self.$success({\r\n                  title: '删除账户成功！',\r\n                  content: `即将在 ${secondsToGo} 秒后跳转到主页...`,\r\n                  okText: '确定'\r\n                });\r\n                const interval = setInterval(() => {\r\n                  secondsToGo -= 1;\r\n                  modal.update({\r\n                    content: `即将在 ${secondsToGo} 秒后跳转到主页...`,\r\n                  });\r\n                }, 1000);\r\n                setTimeout(() => {\r\n                  clearInterval(interval);\r\n                  storage.clearAll();\r\n                  self.$router.replace({name: 'home'});\r\n                  modal.destroy();\r\n                }, secondsToGo * 1000);\r\n                \r\n              } else {\r\n                self.$message.error(res.msg);\r\n              }\r\n            }).catch(err => {\r\n              self.$message.error('请求错误！');\r\n            })\r\n\r\n          },\r\n          onCancel() {\r\n            self.$message.info('操作取消');\r\n          }\r\n        });\r\n\r\n      },\r\n    },\r\n    computed: {\r\n      username() {\r\n        const userInfo = storage.get('userInfo');\r\n        if (userInfo) {\r\n          return userInfo.username;\r\n        }\r\n\r\n        this.getUserInfo();\r\n        return storage.get('userInfo').username;\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getUserInfo();\r\n    },\r\n    activated() {\r\n      this.isLoading = true;\r\n      this.getUserInfo();\r\n    },\r\n    deactivated() {\r\n      this.$destroyAll();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .user-info {\r\n    margin-top: 1%;\r\n    width: 60%;\r\n    border: 2px solid lightgray;\r\n    padding-left: 16%;\r\n    padding-top: 6%;\r\n    font-family: -apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Hiragino Sans GB, Microsoft YaHei, Helvetica Neue, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;\r\n    font-variant: tabular-nums;\r\n    font-feature-settings: \"tnum\";\r\n    font-size: 16px;\r\n  }\r\n\r\n  .user-info li {\r\n    list-style-type: none;\r\n    margin-bottom: 5%;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserCenter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserCenter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserCenter.vue?vue&type=template&id=da109b82&scoped=true&\"\nimport script from \"./UserCenter.vue?vue&type=script&lang=js&\"\nexport * from \"./UserCenter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserCenter.vue?vue&type=style&index=0&id=da109b82&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"da109b82\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","isLoading","staticStyle","attrs","_v","staticClass","_s","userInfo","username","phone","substring","on","changePhone","changePwd","deleteAccount","staticRenderFns","name","components","Header","data","uid","methods","getUserInfo","request","method","url","then","res","storage","catch","error","console","window","title","content","okText","okType","cancelText","onOk","self","resolve","err","reject","secondsToGo","modal","setTimeout","clearInterval","onCancel","computed","mounted","activated","deactivated","component"],"sourceRoot":""}