"use strict";(self["webpackChunklegal_aid"]=self["webpackChunklegal_aid"]||[]).push([[239],{46239:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("div",[t("a-form-model",{ref:"formLogin",attrs:{rules:e.rules,model:e.formLogin},on:{submit:e.login},nativeOn:{submit:function(e){e.preventDefault()}}},[t("a-form-model-item",{attrs:{prop:"phone"}},[t("a-input",{attrs:{placeholder:"请输入手机号",size:"large"},model:{value:e.formLogin.phone,callback:function(t){e.$set(e.formLogin,"phone",t)},expression:"formLogin.phone"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),t("a-form-model-item",{attrs:{prop:"code"}},[t("a-input-search",{attrs:{placeholder:"输入验证码",size:"large"},on:{search:e.sendCode},model:{value:e.formLogin.code,callback:function(t){e.$set(e.formLogin,"code",e._n(t))},expression:"formLogin.code"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"code"},slot:"prefix"}),t("a-button",{attrs:{slot:"enterButton",disabled:e.disable},slot:"enterButton"},[e._v(" "+e._s(e.btnText)+" ")])],1)],1),t("a-form-model-item",[t("a-button",{attrs:{type:"primary",block:"","html-type":"submit",size:"large",loading:e.loading}},[e._v(" 登 录 ")])],1)],1)],1)},s=[],n=(o(21703),o(84471)),i=o(81639),a=o.n(i),l={name:"LoginPhone",data(){let e=(e,t,o)=>{/^1[2-9]\d{9}$/.test(t)?o():o(new Error("手机号格式不正确!"))},t=(e,t,o)=>{if(!t)return o(new Error("请输入验证码！"));Number.isInteger(t)?/^\d{6}$/g.test(t)?o():o(new Error("验证码位数不正确！")):o(new Error("请输入数字！"))};return{formLogin:{phone:"",code:""},loading:!1,btnText:"获取验证码",disable:!1,rules:{phone:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:e,trigger:"change"}],code:[{validator:t,trigger:"change"}]}}},methods:{login(){this.$refs.formLogin.validate((e=>{if(!e)return this.$message.error("请先规范填写表单!"),!1;this.loading=!0;const{phone:t,code:o}=this.formLogin;(0,n.Z)({method:"post",url:"/login",params:{phone:t,code:o}}).then((e=>{if(1===e.code){const t=e.data;a().set("token",t),this.$message.success("登录成功！"),this.$router.push({name:"home"})}else this.$message.error(e.msg),this.formLogin={phone:"",code:""}})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))}))},sendCode(){this.$refs.formLogin.validateField(["phone"],(e=>{if(e)return void this.$message.error("获取验证码失败！");this.disable=!0;let t=60,o=setInterval((()=>{this.btnText=t+" 秒后重新发送",t--,t<0&&(this.disable=!1,this.btnText="获取验证码",clearInterval(o))}),1e3);(0,n.Z)({method:"get",url:"/codes",params:{phone:this.formLogin.phone}}).then((e=>{1===e.code?this.$message.success("验证码发送成功，请注意查收！",5):this.$message.error(e.msg)})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))}))}},activated(){this.loading=!1}},d=l,c=o(1001),g=(0,c.Z)(d,r,s,!1,null,"cb366318",null),h=g.exports}}]);
//# sourceMappingURL=239.879ec1cc.js.map