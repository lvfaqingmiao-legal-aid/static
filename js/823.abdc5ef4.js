"use strict";(self["webpackChunklegal_aid"]=self["webpackChunklegal_aid"]||[]).push([[823],{48823:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});var s=function(){var e=this,r=e._self._c;return r("div",[r("section",{staticClass:"login"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-md-7 col-lg-5"},[r("div",{staticClass:"login-wrap p-3 p-md-5"},[r("a-form-model",{ref:"formRegister",attrs:{model:e.formRegister,rules:e.rules},on:{submit:e.register},nativeOn:{submit:function(e){e.preventDefault()}}},[r("a-form-model-item",{attrs:{prop:"username"}},[r("a-input",{attrs:{placeholder:"请输入用户名",size:"large"},model:{value:e.formRegister.username,callback:function(r){e.$set(e.formRegister,"username",r)},expression:"formRegister.username"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-model-item",{attrs:{prop:"password"}},[r("a-input",{attrs:{type:"password",placeholder:"请输入密码",size:"large"},model:{value:e.formRegister.password,callback:function(r){e.$set(e.formRegister,"password",r)},expression:"formRegister.password"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-model-item",{attrs:{prop:"confirmPassword"}},[r("a-input",{attrs:{type:"password",placeholder:"请再次输入密码",size:"large"},model:{value:e.formRegister.confirmPassword,callback:function(r){e.$set(e.formRegister,"confirmPassword",r)},expression:"formRegister.confirmPassword"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-model-item",{attrs:{prop:"phone"}},[r("a-input",{attrs:{placeholder:"请输入手机号",size:"large"},model:{value:e.formRegister.phone,callback:function(r){e.$set(e.formRegister,"phone",r)},expression:"formRegister.phone"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),r("a-form-model-item",{attrs:{prop:"code"}},[r("a-input-search",{attrs:{placeholder:"输入验证码",size:"large"},on:{search:e.sendCode},model:{value:e.formRegister.code,callback:function(r){e.$set(e.formRegister,"code",e._n(r))},expression:"formRegister.code"}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"code"},slot:"prefix"}),r("a-button",{attrs:{slot:"enterButton",disabled:e.disable},slot:"enterButton"},[e._v(" "+e._s(e.btnText)+" ")])],1)],1),r("a-form-model-item",[r("a-button",{attrs:{type:"primary",block:"","html-type":"submit",size:"large",loading:e.loading}},[e._v(" 注 册 ")])],1)],1)],1)])])])])])},o=[],a=(t(21703),t(84471)),i=t(81639),l=t.n(i),n={name:"Register",data(){let e=(e,r,t)=>{/^1[2-9]\d{9}$/.test(r)?t():t(new Error("手机号格式不正确!"))},r=(e,r,t)=>{if(!r)return t(new Error("请输入验证码！"));Number.isInteger(r)?/^\d{6}$/g.test(r)?t():t(new Error("验证码位数不正确！")):t(new Error("请输入数字！"))},t=(e,r,t)=>{""===r?t(new Error("请输入密码！")):/^(?=.*[a-zA-Z])(?=.*[0-9])[A-Za-z0-9]{8,16}$/.test(r)?""!==this.formRegister.confirmPassword?(this.$refs.formRegister.validateField("confirmPassword"),t()):t():t(new Error("新密码必须由数字和字母构成，不能全部为数字，不能全部为字母，长度在8-16位之间"))},s=(e,r,t)=>{""===r?t(new Error("请再次输入新密码！")):r!==this.formRegister.password?t(new Error("两次输入的密码不一致!")):t()},o=(e,r,t)=>{""===r?t(new Error("请输入用户名！")):/^[a-zA-Z][a-zA-Z0-9_]{5,15}$/.test(r)?t():t(new Error("用户名必须由字母开头，长度在6-16位之间，只能包含数字、字母、下划线"))};return{formRegister:{username:"",password:"",confirmPassword:"",phone:"",code:""},rules:{username:[{validator:o,trigger:"change"}],password:[{validator:t,trigger:"change"}],confirmPassword:[{validator:s,trigger:"change"}],phone:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:e,trigger:"change"}],code:[{validator:r,trigger:"change"}]},loading:!1,btnText:"获取验证码",disable:!1}},methods:{register(){this.$refs.formRegister.validate((e=>{if(!e)return this.$message.error("请先规范填写表单！"),!1;this.loading=!0;const{username:r,password:t,phone:s,code:o}=this.formRegister;(0,a.Z)({method:"post",url:"/ouser/before/register",data:{username:r,password:t,phone:s,code:o}}).then((e=>{1===e.code?(l().clearAll(),this.$router.replace({name:"registerSuccess"})):this.$message.error(e.msg),this.loading=!1})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))}))},sendCode(){this.$refs.formRegister.validateField(["phone"],(e=>{if(e)return void this.$message.error("获取验证码失败！");this.disable=!0;let r=60,t=setInterval((()=>{this.btnText=r+" 秒后重新发送",r--,r<0&&(this.disable=!1,this.btnText="获取验证码",clearInterval(t))}),1e3);(0,a.Z)({method:"get",url:"/ouser/before/getCode",params:{phone:this.formRegister.phone}}).then((e=>{1===e.code?this.$message.success("验证码发送成功，请注意查收！",5):this.$message.error(e.msg)})).catch((e=>{this.$message.error("服务器错误！"),console.log(e)}))}))}}},c=n,d=t(1001),m=(0,d.Z)(c,s,o,!1,null,"3068f2a5",null),g=m.exports}}]);
//# sourceMappingURL=823.abdc5ef4.js.map