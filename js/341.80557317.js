"use strict";(self["webpackChunklegal_aid"]=self["webpackChunklegal_aid"]||[]).push([[341],{35341:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("div",[t.loading?e("div",{staticStyle:{"margin-top":"24%","margin-left":"55%"}},[e("a-spin",{attrs:{size:"large"}})],1):e("div",{staticStyle:{"margin-left":"6%"}},[e("a-descriptions",{attrs:{bordered:"",title:"咨询详情",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}}},[e("a-descriptions-item",{attrs:{label:"标题",span:"3"}},[t._v(" "+t._s(t.description.title)+" ")]),e("a-descriptions-item",{attrs:{label:"姓名"}},[t._v(" "+t._s(t.description.name)+" ")]),e("a-descriptions-item",{attrs:{label:"性别"}},[t._v(" "+t._s(t.description.sex)+" ")]),e("a-descriptions-item",{attrs:{label:"电话"}},[t._v(" "+t._s(t.description.phone)+" ")]),e("a-descriptions-item",{attrs:{label:"地址",span:"2"}},[t._v(" "+t._s(t.region)+" ")]),e("a-descriptions-item",{attrs:{label:"咨询时间"}},[t._v(" "+t._s(t.description.createTime)+" ")]),e("a-descriptions-item",{attrs:{label:"案件详情",span:"3"}},[t._v(" "+t._s(t.description.desc)+" ")]),e("a-descriptions-item",{attrs:{label:"咨询诉求",span:"3"}},[t._v(" "+t._s(t.description.demand)+" ")]),e("a-descriptions-item",{attrs:{label:"附件",span:"3"}},t._l(t.description.file,(function(a){return e("ul",{key:a.id,staticStyle:{"list-style-type":"none","margin-left":"-3%","margin-bottom":"1%"}},[e("li",[e("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.downloadFile(a)}}},[e("a-icon",{attrs:{type:"paper-clip"}}),t._v(" "+t._s(a.name)+" ")],1)])])})),0)],1),e("div",{staticStyle:{"margin-top":"5%"}},[e("a-divider",[t._v("回复")])],1),e("a-list",{staticClass:"comment-list",attrs:{"item-layout":"horizontal","data-source":t.comments},scopedSlots:t._u([{key:"renderItem",fn:function(a,i){return e("a-list-item",{},[e("a-comment",{attrs:{author:a.name,avatar:a.avatar}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",[t._v(" "+t._s(a.content)+" ")]),t._l(a.file,(function(a){return e("ul",{key:a.id,staticStyle:{"list-style-type":"none","margin-left":"-3%","margin-bottom":"1%"}},[e("li",[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.downloadFile(a)}}},[e("a-icon",{attrs:{type:"paper-clip"}}),e("span",[t._v(" "+t._s(a.name))])],1)])])}))],2),e("a-tooltip",{attrs:{slot:"datetime",title:t.moment(a.date).format("YYYY-MM-DD")},slot:"datetime"},[e("span",[t._v(t._s(t.moment(a.date,"YYYY-MM-DD").fromNow()))])])],1)],1)}}])})],1)])},s=[],n=a(36797),o=a.n(n),r=(a(73644),a(84471)),l={name:"ConsultationDetail",data(){return{description:{title:"",name:"",sex:"",phone:"",region:["安徽省","合肥市","瑶海区","明光路街道","xx小区"],createTime:"",desc:"",demand:"",file:[{id:"001",name:"文件1",url:"",size:""},{id:"002",name:"文件2",url:"",size:""}]},comments:[{avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",name:"Han Solo",content:"你说得对，但是Apex...",date:"2022-08-17",file:[{id:"001",name:"文件1",url:"",size:""},{id:"002",name:"文件2",url:"",size:""}]}],moment:o(),loading:!1}},methods:{getDetail(){this.loading=!0,(0,r.Z)({method:"get",url:"/law/response",params:{id:this.$route.query.id}}).then((t=>{1===t.code?(this.description=t.data.detail,this.comments=[t.data.comments]):this.$message.error(t.msg),this.loading=!1})).catch((t=>{this.$message.error("服务器错误！"),console.log(t),this.loading=!1}))},downloadFile(t){const{id:e,name:a,url:i}=t;(0,r.Z)({method:"get",url:"/law/download",params:{id:e}}).then((t=>{if(console.log(t.code),1===t.code){const e=document.createElement("a");let i=new Blob([t.data]);e.download=a,e.href=URL.createObjectURL(i),e.target="_blank",e.style.display="none",document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}else this.$message.error(t.msg)})).catch((t=>{this.$message.error("服务器错误！"),console.log(t)}))}},computed:{region(){let t="";for(let e=0;e<this.description.region.length;e++)t+=this.description.region[e];return t}},activated(){this.getDetail()}},d=l,c=a(1001),m=(0,c.Z)(d,i,s,!1,null,"2a05ad04",null),p=m.exports}}]);
//# sourceMappingURL=341.80557317.js.map